# HTTP server configurations.
[http]
# The port number to run the HTTP server on.
port = 6881

# Internal Mainline node configurations
[mainline]
# Port to run the internal Mainline DHT node on.
port = 6881

# Cache settings
[cache]
# Set the path for the cache storage.
#
# Should be either absolute or relative to the location of this config file.
# Cache will be stored in a `pkarr-cache` directory inside the provided directory.
#
# Defaults to a random temporary directory.
path = "./storage/location"
# Maximum number of SignedPackets to store, before evicting the oldest packets.
size = 1_000_000

# Minimum TTL before attempting to lookup a more recent version of a SignedPacket
minimum_ttl = 300
# Maximum TTL before attempting to lookup a more recent version of a SignedPacket
maximum_ttl = 86400

# Rate limiting - applies IP-based limit to both DHT and HTTP (ENABLED BY DEFAULT)
[rate_limiter]
behind_proxy = false
per_second = 2
burst_size = 10

# Advanced: Override with specific DHT/HTTP configs
# [dht_rate_limit]
# per_second = 2
# burst_size = 10

# [http_rate_limit]
# [[http_rate_limit.rate_limits]]
# operation = "resolve"
# quota = "30r/m"
# burst = 30
# [[http_rate_limit.rate_limits]]
# operation = "publish"
# quota = "5r/s"
# burst = 10
# whitelist = ["127.0.0.1"]

# Relay configuration (optional, for other advanced features)
[relay]
# Whether the relay is behind a reverse proxy (Nginx, Cloudflare, etc.)
# If true, trusts X-Forwarded-For and X-Real-IP headers
# If false, only uses direct socket IP (safer)
# Defaults to false
# behind_proxy = false

# Whether to respect the most_recent query parameter in resolve requests
# If true, the most_recent query parameter is respected and will bypass cache
# If false, the most_recent query parameter is ignored and will always load from cache
# Defaults to false
# resolve_most_recent = false
